

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Design &mdash; Stalker v0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Stalker v0.0.1 documentation" href="index.html" />
    <link rel="next" title="How To Contribute" href="contribute.html" />
    <link rel="prev" title="Welcome to stalker’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contribute.html" title="How To Contribute"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to stalker’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Stalker v0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<p>The design of Stalker mentioned in the sections below.</p>
<div class="section" id="mission">
<h2>Mission<a class="headerlink" href="#mission" title="Permalink to this headline">¶</a></h2>
<p>The project is about creating an Open Source Production Asset Management
(ProdAM) System called Stalker which is designed for Vfx/Animation Studios.
Stalker will be consisting of a framework and the interface those has been
build over the framework. Stalker will have a very flexible design that lets
the pipeline tds to customize it in a wide variety of perspectives. The out of
the package installation will meet the basic needs of majority of studios
without too much effort.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The usage of an asset management system in an animation/vfx studio is an
obligatory duty for the sake of the studio itself. Even the benefits of the
system becomes silly to be mentioned when compared to the lack of even a simple
system.</p>
<p>Every studio outside establishes and developes its own asset management system.
Stalker will try to be the framework that these proprietry asset management
systems will be build over. Thus reducing the work repeated on every big project
start</p>
</div>
<div class="section" id="features-and-requirements">
<h2>Features and Requirements<a class="headerlink" href="#features-and-requirements" title="Permalink to this headline">¶</a></h2>
<p>Features:</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Will be developed purely in Python (2.6 and over) using TDD (Test Driven
Development) practices</p>
</li>
<li><p class="first">SQLAlchemy for the database back-end and ORM</p>
</li>
<li><p class="first">User should be able to select his/her preferred database like PostgreSQL,
MySQL, Oracle, SQLite etc. (whatever SQLAlchemy supports)</p>
</li>
<li><p class="first">The user should be able to select both one or different databases for
studio specific and project specific data. It is mostly beneficial when the
setup uses SQLite. The project specific data could be kept in project
folder as an SQLite db file and the studio specific data can be another
SQLite db file or another database connection to PostgreSQL, MySQL, Oracle
etc. databases. In an SQLite setup, the database can be backed up with the
project folder itself.</p>
</li>
<li><p class="first">PyQt and web based user interfaces. The design of the interface should fit
in to MTV or MVC template. So it will be easy to write the interface in
PyQt or in forms of web application.</p>
<p>The priorities of the development phase is to create the framework first.</p>
</li>
<li><p class="first">Configuration files to let the user to configure all the aspects of the
project management. There are going to be interfaces for this setup
processes and also it should be like setting up a Django or Trac project
from the command line.</p>
</li>
<li><p class="first">The first design of the database schema is shown below:</p>
<p><img alt="Stalker_Design" src="_images/stalker_design.jpeg" style="width: 800px;" /></p>
<p>In this first design all the basic data types tried to be created with an
inherited structure. All the classes are derived from the Base data type.</p>
</li>
<li><p class="first">A templating system for the file and folder naming convention will be used
like: {projectServer.path}/{project.name}/assets/{asset.name}/
{pipelineStep.name}/{asset.variation.name}/{asset.name}_{asset.type.name}
_v{asset.version}.{asset.fileFormat.extension}</p>
</li>
<li><p class="first">file and folders and file sequences could be uploaded to the server as
assets, and the server decides where to place the folder or file</p>
</li>
<li><p class="first">there should be callbacks for every CRUD (create/insert, read, update,
delete) step like before insert, after insert etc.</p>
</li>
<li><p class="first">pipeline steps should be hierarchically managed to let the project admin
create pipeline dependencies between each step, so the system prevents the
user to go to the next step before approving the previous ones (like rop
dependencies in houdini), or it should keep track of the dependencies
instead of preventing</p>
</li>
<li><p class="first">variations/takes of different versions of assets, a variation/take can be
dependent to a specific asset version (variation root)</p>
</li>
</ol>
</blockquote>
<p>(continiuing)</p>
</div>
<div class="section" id="usage-examples">
<h2>Usage Examples<a class="headerlink" href="#usage-examples" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s dance with Stalker a little bit.</p>
<p>First import some modules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stalker.models</span> <span class="kn">import</span> <span class="n">project</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">imageFormat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stalker.db</span> <span class="kn">import</span> <span class="n">mapper</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
</pre></div>
</div>
<p>Let&#8217;s create a new project called &#8220;New Project&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">newProject</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="s">&#39;New Project&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Change the image format of the project:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">newProject</span><span class="o">.</span><span class="n">imageFormat</span> <span class="o">=</span> <span class="n">imageFormat</span><span class="o">.</span><span class="n">ImageFormat</span><span class="p">(</span> <span class="s">&#39;HD&#39;</span><span class="p">,</span> <span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">)</span>
</pre></div>
</div>
<p>Add a couple of users to the project</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">newUser</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Erkan Ozgur&#39;</span><span class="p">,</span>
<span class="go">                        last_name=&#39;Yilmaz&#39;,</span>
<span class="go">                        e-mail=&#39;eoyilmaz@gmail.com&#39;,</span>
<span class="go">                        login_name=&#39;eoyilmaz&#39;,</span>
<span class="go">                        password = &#39;secret&#39;)</span>
</pre></div>
</div>
<p>Save and flush the data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">newUser</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>
</div>
<p>Get the users from the database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
</pre></div>
</div>
<p>Get all the users:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>or select a couple of users by filters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Ozgur&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or select the first user matching query criteria:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Ozgur&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>
</div>
<p>Now add them to the project:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">newProject</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</pre></div>
</div>
<p>Save the new project to the database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">newProject</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>
</div>
<p>Let&#8217;s ask the tasks of one user:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ozgur</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ozgur&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span> <span class="o">=</span> <span class="n">ozgur</span><span class="o">.</span><span class="n">tasks</span>
</pre></div>
</div>
<p>Get the on going tasks of this user:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">onGoingTasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">task</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">ozgur</span><span class="o">.</span><span class="n">tasks</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="o">.</span><span class="n">isComplete</span><span class="p">]</span>
</pre></div>
</div>
<p>Get the on going tasks of this user by using the database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">taskQuery</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">sessison</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ozgur&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">Task</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">status</span><span class="o">!=</span><span class="s">&#39;complete&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onGoingTasks</span> <span class="o">=</span> <span class="n">taskQuery</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>Get the &#8220;rig&#8221; tasks of ozgur:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rigTasks</span> <span class="o">=</span>  <span class="n">taskQuery</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pipelineStep</span><span class="o">.</span><span class="n">pipelineStep</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Rig&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>As you see all the functionalities of SQLAlchemy is fully supported. At the end
all the models are plain old python objects (POPO) and the persistancy part is
handled with SQLAlchemy.</p>
</div>
<div class="section" id="data-classes-and-inheritance-map">
<h2>Data Classes And Inheritance Map<a class="headerlink" href="#data-classes-and-inheritance-map" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>ImageFormat:</dt>
<dd><dl class="first last docutils">
<dt>Description:</dt>
<dd>It is used to store information about various image formats.</dd>
<dt>Attributes:</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">attribute name</th>
<th class="head">type</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>name</td>
<td>unicode</td>
</tr>
<tr><td>width</td>
<td>integer</td>
</tr>
<tr><td>height</td>
<td>integer</td>
</tr>
<tr><td>deviceAspectRatio</td>
<td>float</td>
</tr>
<tr><td>pixelAspectRatio</td>
<td>float</td>
</tr>
<tr><td>printResolution</td>
<td>float</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd>
<dt>Unit:</dt>
<dd><dl class="first last docutils">
<dt>Description:</dt>
<dd>This is the base Unit class that keeps data about the units</dd>
<dt>Attributes:</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">attribute name</th>
<th class="head">type</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>name</td>
<td>unicode</td>
</tr>
<tr><td>abbreviation</td>
<td>unicode</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd>
<dt>ConvertableUnit:</dt>
<dd><dl class="first docutils">
<dt>Description:</dt>
<dd>Convertable units like linear and angular units will derive from this class</dd>
</dl>
<p class="last">Attributes:</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Design</a><ul>
<li><a class="reference internal" href="#mission">Mission</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#features-and-requirements">Features and Requirements</a></li>
<li><a class="reference internal" href="#usage-examples">Usage Examples</a></li>
<li><a class="reference internal" href="#data-classes-and-inheritance-map">Data Classes And Inheritance Map</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to stalker&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="contribute.html"
                        title="next chapter">How To Contribute</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/design.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contribute.html" title="How To Contribute"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to stalker’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">Stalker v0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Erkan Ozgur Yilmaz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>